<div class="container w-75">
  <% if(errorMessage) { %>
  <div class="alert alert-danger alert-dismissible fade show" role="alert">
    <% errorMessage.forEach((error) => { %>
    <li><%= error.msg %></li>
    <%}) %>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>
  <% } %>

  <h1 class="mt-5 mb-4 header">Update Job Details</h1>

  <form action="/update-job/<%= job.id %>" method="post">
    <input
      type="hidden"
      class="form-control"
      id="jobPosted"
      name="jobPosted"
      value="<%= job.jobPosted %>"
    />

    <select
    class="form-select mb-3"
    id="jobCategory"
    name="jobCategory"
    aria-label="Job Category"
  >
    <% jobCategories.forEach((categoryOptions) => { %>
    <option value="<%= categoryOptions %>" <%= categoryOptions === job.jobCategory ? 'selected' : '' %>  ><%= categoryOptions %></option>
    <% }); %>
    </select>

    <select
      class="form-select mb-3"
      id="jobDesignation"
      name="jobDesignation"
      aria-label="job designation"
    >
      <% jobDesignations.forEach((designationOptions) => { %>
      <option value="<%= designationOptions %>" <%= designationOptions === job.jobDesignation ? 'selected' : '' %>  ><%= designationOptions %></option>
      <% }); %>

    </select>

    <div class="mb-3">
      <label for="jobLocation" class="form-label">Enter job location</label>
      <input
        type="text"
        class="form-control"
        id="jobLocation"
        name="jobLocation"
        value="<%= job.jobLocation %>"
      />
    </div>
    <div class="mb-3">
      <label for="companyName" class="form-label">Company Name</label>
      <input
        class="form-control"
        id="companyName"
        name="companyName"
        value=" <%= job.companyName %>"
      />
    </div>

    <div class="row mb-3">
      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text" id="salary">Enter salary</span>
          <input
            type="text"
            class="form-control"
            id="salary"
            name="salary"
            value="<%= job.salary %>"
            required
          />
        </div>
      </div>

      <div class="col-md-6">
        <div class="input-group">
          <span class="input-group-text" id="numberOfOpenings"
            >Total Positions</span
          >
          <input
            type="number"
            class="form-control"
            id="numberOfOpenings"
            name="numberOfOpenings"
            step="0.01"
            value="<%= job.numberOfOpenings %>"
            required
          />
        </div>
      </div>
    </div>

    <% jobSkills.forEach((skill)=> { %>

    <div class="form-check form-check-inline">
      <input class="form-check-input" type="checkbox" name="skills"
      id="skill_<%= skill %>" value="<%= skill %>" <%=
      job.skillsRequired.includes(skill) ? 'checked' : '' %> />
      <label class="form-check-label" for="skill_<%= skill %>">
        <%= skill %>
      </label>
    </div>
    <% }) %>

    <div class="mb-3">
      <label for="applyBy" class="form-label">Apply By</label>
      <input
        type="date"
        class="form-control"
        id="applyBy"
        name="applyBy"
        value="<%= job.applyBy %>"
      />
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
</div>
